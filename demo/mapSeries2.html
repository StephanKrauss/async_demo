<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link href="demo.css" rel="stylesheet">

    <title>async.mapSeries mit Array, Fehler</title>
</head>
<body>
    <h3>async.mapSeries mit Array, Fehler</h3>

    <div id="beschreibung">
        Console zuschalten!<br>
        Arbeitet das Array als Serie.<br>
        Wartezeit hat keine Bedeutung<br>
        Ein Fehler wird an die Callback - Funktion Ã¼bergeben.
    </div>

    <script type="text/javascript" src="../dist/async.js"></script>

    <script type="text/javascript">

        var arr = [
            {name:'Jack', delay:200},
            {name:'Mike', delay: 100},
            {name:'Freewind', delay:300},
            {name:'Test', delay: 50}
        ];

        var i = 1;
        async.mapSeries(arr, function(item, callback)
        {
            console.log('aus Array: ' + item.name);

            setTimeout(function()
            {
                console.log(i + '.Durchlauf, Name: ' + item.name + ', Zeit: ' + item.delay);

                if(item.name == 'Mike')
                    callback('Fehler');
                else
                    callback(null, item.name);

                i++;
            },
            item.delay);
        },
        function(err, results) {
            console.log('Auswertung Callback !!!');
            console.log('Fehler Callback: ', err);
            console.log('Ergebnis Callback: ', results);
        });

    </script>

</body>
</html>